(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{369:function(a,s,t){"use strict";t.r(s);var v=t(3),_=Object(v.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"spring-cloud组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud组件"}},[a._v("#")]),a._v(" Spring Cloud组件")]),a._v(" "),s("ul",[s("li",[a._v("注册中心：Eureka，Nacos")]),a._v(" "),s("li",[a._v("负载均衡：Ribbon")]),a._v(" "),s("li",[a._v("远程调用：Feign")]),a._v(" "),s("li",[a._v("服务保护：sentinel")]),a._v(" "),s("li",[a._v("网关：Zuul，Gateway")])]),a._v(" "),s("h2",{attrs:{id:"eureka"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eureka"}},[a._v("#")]),a._v(" Eureka")]),a._v(" "),s("p",[a._v("注册中心，服务需要去注册中心进行注册，那么注册中心便可以知道当前有什么服务，以及对应的地址是什么，并每30秒服务向注册中心发送消息，表示我还活着。服务消费者可以到注册中心寻找响应的服务提供者来远程调用。")]),a._v(" "),s("p",[s("strong",[a._v("与Nacos区别")])]),a._v(" "),s("p",[a._v("Nacos对于临时实例，采用心跳模式。对于非临时实例采用主动检测模式。")]),a._v(" "),s("p",[a._v("Nacos还支持配置中心。")]),a._v(" "),s("h2",{attrs:{id:"ribbon"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ribbon"}},[a._v("#")]),a._v(" Ribbon")]),a._v(" "),s("ul",[s("li",[a._v("RoundRobinRule：轮询服务列表来选择服务器")]),a._v(" "),s("li",[a._v("WeightedResponseTime：按照权重来选择服务器，响应时间越长，权重越小")]),a._v(" "),s("li",[a._v("RandomRule：随机选择一个可用的服务器")]),a._v(" "),s("li",[a._v("ZoneAvoidanceRule：以区域为基础进行服务器选择")])]),a._v(" "),s("p",[a._v("如果想自定义实现负载均衡策略，需要实现IRule接口")]),a._v(" "),s("h2",{attrs:{id:"服务雪崩"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务雪崩"}},[a._v("#")]),a._v(" 服务雪崩")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://lzh-images.oss-cn-hangzhou.aliyuncs.com/images/image-20230605105814339.png",alt:"image-20230605105814339"}})]),a._v(" "),s("ul",[s("li",[a._v("熔断，降级")]),a._v(" "),s("li",[a._v("限流")])]),a._v(" "),s("p",[s("strong",[a._v("服务降级")]),a._v("，一种自我保护方式，确保服务不会受请求突增影响变得不可用")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://lzh-images.oss-cn-hangzhou.aliyuncs.com/images/image-20230605110219522.png",alt:"image-20230605110219522"}})]),a._v(" "),s("p",[s("strong",[a._v("服务熔断")]),a._v("，如果一定时间内，降级次数过多，则会触发服务熔断，熔断后不再对这个节点进行访问")]),a._v(" "),s("h2",{attrs:{id:"监控"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监控"}},[a._v("#")]),a._v(" 监控")]),a._v(" "),s("p",[s("strong",[a._v("skywalking")]),a._v("，分布式系统的应用程序性能监控工具，提供完善的链路追踪功能。")]),a._v(" "),s("ul",[s("li",[a._v("服务")]),a._v(" "),s("li",[a._v("端点")]),a._v(" "),s("li",[a._v("实例")])]),a._v(" "),s("h2",{attrs:{id:"限流"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#限流"}},[a._v("#")]),a._v(" 限流")]),a._v(" "),s("p",[a._v("第一，并发的流量大，避免将服务器搞垮，影响可用性。第二防止用户恶意刷单刷接口。")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("Tomcat：可以设置最大连接数")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://lzh-images.oss-cn-hangzhou.aliyuncs.com/images/image-20230605152350861.png",alt:"image-20230605152350861"}})])]),a._v(" "),s("li",[s("p",[a._v("Nginx：漏桶算法")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://lzh-images.oss-cn-hangzhou.aliyuncs.com/images/image-20230605153046829.png",alt:"image-20230605153046829"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://lzh-images.oss-cn-hangzhou.aliyuncs.com/images/image-20230605153105069.png",alt:"image-20230605153105069"}})])]),a._v(" "),s("li",[s("p",[a._v("网关：令牌桶算法")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://lzh-images.oss-cn-hangzhou.aliyuncs.com/images/image-20230605153120579.png",alt:"image-20230605153120579"}})])]),a._v(" "),s("li",[s("p",[a._v("自定义拦截器")])])]),a._v(" "),s("h2",{attrs:{id:"cap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cap"}},[a._v("#")]),a._v(" CAP")]),a._v(" "),s("p",[a._v("CAP，分别是一致性，可用性，分区容错性，分布式系统无法同时满足这三个指标。")]),a._v(" "),s("p",[s("strong",[a._v("BASE")])]),a._v(" "),s("p",[a._v("基本可用，有中间状态，但是保证最终一致性。")]),a._v(" "),s("p",[a._v("最终一致性，各个分支事务分别执行提交，如果不一致再想办法恢复数据")]),a._v(" "),s("p",[a._v("强一致性，各个分支事务执行完业务不要提交，"),s("strong",[a._v("等待")]),a._v("彼此的结果，统一提交或回滚。")]),a._v(" "),s("h3",{attrs:{id:"seata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#seata"}},[a._v("#")]),a._v(" "),s("strong",[a._v("seata")])]),a._v(" "),s("p",[s("strong",[a._v("XA模式")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://lzh-images.oss-cn-hangzhou.aliyuncs.com/images/image-20230605165432748.png",alt:"image-20230605165432748"}})]),a._v(" "),s("h3",{attrs:{id:"at模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#at模式"}},[a._v("#")]),a._v(" AT模式")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://lzh-images.oss-cn-hangzhou.aliyuncs.com/images/image-20230605165515341.png",alt:"image-20230605165515341"}})]),a._v(" "),s("h3",{attrs:{id:"ttc模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ttc模式"}},[a._v("#")]),a._v(" TTC模式")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://lzh-images.oss-cn-hangzhou.aliyuncs.com/images/image-20230605165544745.png",alt:"image-20230605165544745"}})]),a._v(" "),s("h3",{attrs:{id:"mq分布式事务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mq分布式事务"}},[a._v("#")]),a._v(" MQ分布式事务")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://lzh-images.oss-cn-hangzhou.aliyuncs.com/images/image-20230605165602414.png",alt:"image-20230605165602414"}})]),a._v(" "),s("h2",{attrs:{id:"幂等"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#幂等"}},[a._v("#")]),a._v(" 幂等")]),a._v(" "),s("p",[a._v("多次调用同一接口不会改变业务状态，保证结果一致。")]),a._v(" "),s("ul",[s("li",[a._v("用户重复点击")]),a._v(" "),s("li",[a._v("MQ消息重复")]),a._v(" "),s("li",[a._v("应用使用失败或超时重试机制")])]),a._v(" "),s("p",[a._v("通过添加字段，若字段的值已经是目标值，则放弃更改。")]),a._v(" "),s("p",[a._v("使用token+redis，对于新增和修改，在前一个页面，给客户端发放token，服务器将token存到redis中。若当前请求带有token，则是第一次访问，处理完后删除token。若是请求中没有带有token，说明这是重复的请求，忽略。")]),a._v(" "),s("h2",{attrs:{id:"xxl-job"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xxl-job"}},[a._v("#")]),a._v(" xxl-job")]),a._v(" "),s("p",[a._v("解决集群中一些需要重复执行的任务，cron表达式定义灵活，并且支持任务分片。")]),a._v(" "),s("p",[s("strong",[a._v("路由策略")])]),a._v(" "),s("p",[a._v("ROUND，轮询")]),a._v(" "),s("p",[a._v("SHARDING_BROADCAST，分片广播，广播集群中所有机器执行一次任务，同时系统自动传递分片参数，根据分片参数开发分片任务。")]),a._v(" "),s("p",[s("strong",[a._v("任务执行失败")])]),a._v(" "),s("p",[a._v("查看日志分析，重试。")]),a._v(" "),s("p",[s("strong",[a._v("大数据量任务")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://lzh-images.oss-cn-hangzhou.aliyuncs.com/images/image-20230606092946776.png",alt:"image-20230606092946776"}})])])}),[],!1,null,null,null);s.default=_.exports}}]);